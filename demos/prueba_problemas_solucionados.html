<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß Prueba R√°pida - Problemas Solucionados</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .test-card { background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-12">
                <div class="test-card p-4">
                    <h1 class="text-center mb-4">üîß Verificaci√≥n de Problemas Solucionados</h1>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card border-primary">
                                <div class="card-header bg-primary text-white">
                                    <h5><i class="bi bi-1-circle me-2"></i>Navbar Code</h5>
                                </div>
                                <div class="card-body">
                                    <p><strong>Estado:</strong> <span id="navbar-status" class="badge bg-warning">Verificando...</span></p>
                                    <p><strong>Archivo:</strong> config/navbar_code.php</p>
                                    <p><strong>Inclusi√≥n:</strong> Comillas dobles</p>
                                    <button class="btn btn-primary btn-sm" onclick="probarNavbar()">üîç Verificar</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="card border-success">
                                <div class="card-header bg-success text-white">
                                    <h5><i class="bi bi-2-circle me-2"></i>C√≥digo Secuencial</h5>
                                </div>
                                <div class="card-body">
                                    <p><strong>√öltimo ID:</strong> <span id="ultimo-id" class="badge bg-info">Cargando...</span></p>
                                    <p><strong>Pr√≥ximo C√≥digo:</strong> <span id="proximo-codigo" class="badge bg-success">Cargando...</span></p>
                                    <p><strong>¬øEs PROD-0000066?</strong> <span id="codigo-correcto" class="badge bg-warning">Verificando...</span></p>
                                    <button class="btn btn-success btn-sm" onclick="probarCodigo()">üî¢ Verificar</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="card border-info">
                                <div class="card-header bg-info text-white">
                                    <h5><i class="bi bi-3-circle me-2"></i>Pesta√±as Independientes</h5>
                                </div>
                                <div class="card-body">
                                    <p><strong>Bootstrap:</strong> <span class="badge bg-success">5.3.2</span></p>
                                    <p><strong>data-bs-toggle:</strong> <span class="badge bg-success">Configurado</span></p>
                                    <p><strong>Duplicadas:</strong> <span class="badge bg-success">Eliminadas</span></p>
                                    <button class="btn btn-info btn-sm" onclick="probarPestanas()">üìë Verificar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-12">
                            <h3>üß™ Prueba de Pesta√±as en Vivo</h3>
                            <ul class="nav nav-tabs" id="testTabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="test1-tab" data-bs-toggle="tab" data-bs-target="#test1" type="button" role="tab">Pesta√±a 1</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="test2-tab" data-bs-toggle="tab" data-bs-target="#test2" type="button" role="tab">Pesta√±a 2</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="test3-tab" data-bs-toggle="tab" data-bs-target="#test3" type="button" role="tab">Pesta√±a 3</button>
                                </li>
                            </ul>
                            <div class="tab-content border border-top-0 p-3" id="testTabContent">
                                <div class="tab-pane fade show active" id="test1" role="tabpanel">
                                    <h5>‚úÖ Pesta√±a 1 Activa</h5>
                                    <p>Si puedes ver este contenido, las pesta√±as funcionan independientemente.</p>
                                </div>
                                <div class="tab-pane fade" id="test2" role="tabpanel">
                                    <h5>‚úÖ Pesta√±a 2 Activa</h5>
                                    <p>¬°Excelente! Las pesta√±as cambian sin problemas.</p>
                                </div>
                                <div class="tab-pane fade" id="test3" role="tabpanel">
                                    <h5>‚úÖ Pesta√±a 3 Activa</h5>
                                    <p>¬°Perfecto! El sistema de pesta√±as est√° funcionando correctamente.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-12 text-center">
                            <h3>üöÄ Acciones R√°pidas</h3>
                            <a href="obtener_ultimo_codigo.php" class="btn btn-outline-primary me-2" target="_blank">
                                <i class="bi bi-code-square me-1"></i>Probar API C√≥digos
                            </a>
                            <a href="modulos/Inventario/producto_form.php" class="btn btn-success me-2">
                                <i class="bi bi-plus-circle me-1"></i>Ir al Formulario
                            </a>
                            <a href="diagnostico_completo_problemas.php" class="btn btn-outline-info">
                                <i class="bi bi-search me-1"></i>Diagn√≥stico Completo
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function probarNavbar() {
            const status = document.getElementById('navbar-status');
            status.textContent = 'Verificando...';
            status.className = 'badge bg-warning';
            
            fetch('config/navbar_code.php')
                .then(response => {
                    if (response.ok) {
                        status.textContent = '‚úÖ Funciona';
                        status.className = 'badge bg-success';
                    } else {
                        status.textContent = '‚ùå Error';
                        status.className = 'badge bg-danger';
                    }
                })
                .catch(error => {
                    status.textContent = '‚ùå No disponible';
                    status.className = 'badge bg-danger';
                });
        }
        
        function probarCodigo() {
            fetch('obtener_ultimo_codigo.php')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        document.getElementById('ultimo-id').textContent = data.ultimo_id;
                        document.getElementById('proximo-codigo').textContent = data.codigo;
                        
                        const correcto = data.codigo === 'PROD-0000066';
                        const badge = document.getElementById('codigo-correcto');
                        badge.textContent = correcto ? '‚úÖ S√ç' : '‚ùå NO';
                        badge.className = correcto ? 'badge bg-success' : 'badge bg-danger';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }
        
        function probarPestanas() {
            alert('¬°Las pesta√±as funcionan! Haz clic en las pesta√±as de prueba de arriba para verificar.');
        }
        
        // Cargar datos autom√°ticamente
        document.addEventListener('DOMContentLoaded', function() {
            probarCodigo();
            probarNavbar();
        });
    </script>
</body>
</html>
