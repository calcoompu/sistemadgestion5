# PREPARACI√ìN PARA GITHUB REPOSITORY
# Script para crear ZIP optimizado para subir a GitHub

Write-Host "üöÄ PREPARANDO PROYECTO PARA GITHUB" -ForegroundColor Cyan
Write-Host "====================================" -ForegroundColor Cyan

$fecha = Get-Date -Format "yyyy-MM-dd_HH-mm-ss"
$nombreProyecto = "sistemadgestion5"
$archivoZip = "github-ready-$nombreProyecto-$fecha.zip"

Write-Host "üì¶ Creando ZIP para GitHub: $archivoZip" -ForegroundColor Yellow

# Crear carpeta temporal para organizar archivos
$tempDir = "temp_github_$fecha"
New-Item -ItemType Directory -Path $tempDir -Force | Out-Null

Write-Host "üìÅ Copiando archivos esenciales..." -ForegroundColor Yellow

# ARCHIVOS CORE ESENCIALES
Write-Host "  ‚úÖ Archivos core del sistema..." -ForegroundColor Green
Copy-Item -Path @(
    "index.php",
    "login.php", 
    "logout.php",
    "menu_principal.php",
    "obtener_ultimo_codigo.php",
    "README.md"
) -Destination $tempDir -Force -ErrorAction SilentlyContinue

# CARPETAS ESENCIALES
Write-Host "  ‚úÖ Carpetas del sistema..." -ForegroundColor Green
$carpetasEsenciales = @("modulos", "config", "ajax", "assets")
foreach ($carpeta in $carpetasEsenciales) {
    if (Test-Path $carpeta) {
        Copy-Item -Path $carpeta -Destination $tempDir -Recurse -Force
        Write-Host "    üìÇ $carpeta copiado" -ForegroundColor Gray
    }
}

# ARCHIVOS DE GESTI√ìN
Write-Host "  ‚úÖ Formularios y gesti√≥n..." -ForegroundColor Green  
Copy-Item -Path @(
    "categoria_form.php",
    "lugar_form.php", 
    "usuario_form.php",
    "proveedor_form.php",
    "gestionar_*.php",
    "proveedores.php",
    "usuarios.php",
    "reportes.php"
) -Destination $tempDir -Force -ErrorAction SilentlyContinue

# ARCHIVOS DE REPORTES Y EXCEL
Write-Host "  ‚úÖ Sistema de reportes..." -ForegroundColor Green
Copy-Item -Path @(
    "excel_nativo.php",
    "reporte_*.php"
) -Destination $tempDir -Force -ErrorAction SilentlyContinue

# DOCUMENTACI√ìN ESENCIAL
Write-Host "  ‚úÖ Documentaci√≥n principal..." -ForegroundColor Green
New-Item -ItemType Directory -Path "$tempDir\docs" -Force | Out-Null
if (Test-Path "docs") {
    Copy-Item -Path "docs\README.md" -Destination "$tempDir\docs\" -Force -ErrorAction SilentlyContinue
    Copy-Item -Path "docs\GUIA_*.md" -Destination "$tempDir\docs\" -Force -ErrorAction SilentlyContinue
    Copy-Item -Path "docs\INSTRUCCIONES_*.md" -Destination "$tempDir\docs\" -Force -ErrorAction SilentlyContinue
}

# CREAR ARCHIVOS ADICIONALES PARA GITHUB
Write-Host "  ‚úÖ Creando archivos para GitHub..." -ForegroundColor Green

# .gitignore
$gitignore = @"
# Archivos de configuraci√≥n local
config/config_local.php
config/database_local.php

# Archivos temporales
*.tmp
*.temp
*~
*.bak

# Logs
logs/
*.log

# Uploads y archivos de usuario
assets/uploads/
assets/scanner_input/
assets/scanner_processed/

# Backups
backup/
sql_backup/

# Archivos de desarrollo
.vscode/
docs_temp/

# Archivos del sistema
Thumbs.db
.DS_Store

# Archivos PHP temporales
*.php~

# Archivos de base de datos locales
*.sql
database.sql

# Archivos de prueba
test_*.php
debug_*.php
verificar_*.php
"@

$gitignore | Out-File -FilePath "$tempDir\.gitignore" -Encoding UTF8

# README.md mejorado para GitHub
$readmeGithub = @"
# üìä Sistema de Gesti√≥n Empresarial

Sistema completo de gesti√≥n empresarial desarrollado en PHP con MySQL, que incluye m√≥dulos de inventario, compras, facturaci√≥n, clientes y administraci√≥n.

## üöÄ Caracter√≠sticas Principales

### üì¶ M√≥dulos Incluidos
- **üíº Administraci√≥n**: Gesti√≥n de usuarios, configuraci√≥n del sistema
- **üë• Clientes**: Registro y gesti√≥n de clientes
- **üõí Compras**: Sistema completo de compras y proveedores
- **üìÑ Facturaci√≥n**: Generaci√≥n y gesti√≥n de facturas
- **üìä Inventario**: Control de stock con esc√°ner de c√≥digos de barras
- **üìã Pedidos**: Gesti√≥n de pedidos y seguimiento
- **üè∑Ô∏è Productos**: Cat√°logo completo con 6 pesta√±as de informaci√≥n

### üéØ Funcionalidades Destacadas
- **üì± Esc√°ner Universal**: Webcam, celular, lector USB y entrada manual
- **üìà Reportes**: Exportaci√≥n a Excel y PDF
- **üîê Sistema de Permisos**: Control de acceso por roles
- **üí± Multi-moneda**: Soporte para m√∫ltiples monedas
- **üìä Dashboard**: Panel de control con m√©tricas
- **üîÑ AJAX**: Interfaz din√°mica y responsiva

## üõ†Ô∏è Tecnolog√≠as

- **Backend**: PHP 8.1+
- **Base de Datos**: MySQL 8.0+
- **Frontend**: Bootstrap 5.3, JavaScript ES6+
- **Librer√≠as**: HTML5-QRCode, jsPDF, PhpSpreadsheet
- **Servidor**: Apache/Nginx

## üìã Requisitos del Sistema

### Servidor Web
- PHP 8.1 o superior
- MySQL 8.0 o superior
- Apache 2.4+ o Nginx 1.18+

### Extensiones PHP Requeridas
```
php-mysql
php-pdo
php-gd
php-mbstring
php-curl
php-zip
php-xml
```

## üöÄ Instalaci√≥n

### 1. Clonar el Repositorio
```bash
git clone https://github.com/tu-usuario/sistemadgestion5.git
cd sistemadgestion5
```

### 2. Configurar Base de Datos
```sql
CREATE DATABASE sistemadgestion5;
USE sistemadgestion5;
-- Importar estructura desde config/database.sql
```

### 3. Configuraci√≥n
```php
// config/config.php
define('DB_HOST', 'localhost');
define('DB_NAME', 'sistemadgestion5');
define('DB_USER', 'tu_usuario');
define('DB_PASS', 'tu_password');
```

### 4. Permisos
```bash
chmod 755 assets/uploads/
chmod 755 assets/scanner_input/
chmod 755 assets/scanner_processed/
```

## üìñ Uso

1. **Acceder al sistema**: `http://tu-servidor/sistemadgestion5/`
2. **Login inicial**: admin / admin (cambiar despu√©s)
3. **Configurar empresa**: Men√∫ > Administraci√≥n > Configuraci√≥n
4. **Crear usuarios**: Men√∫ > Administraci√≥n > Usuarios

## üìÅ Estructura del Proyecto

```
sistemadgestion5/
‚îú‚îÄ‚îÄ üìÑ index.php              # P√°gina principal
‚îú‚îÄ‚îÄ üìÑ login.php              # Sistema de autenticaci√≥n
‚îú‚îÄ‚îÄ üìÑ menu_principal.php     # Men√∫ principal
‚îú‚îÄ‚îÄ üìÇ modulos/               # M√≥dulos del sistema
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ admin/            # Administraci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ clientes/         # Gesti√≥n de clientes
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ compras/          # Sistema de compras
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ facturas/         # Facturaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ Inventario/       # Control de inventario
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ pedidos/          # Gesti√≥n de pedidos
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ productos/        # Cat√°logo de productos
‚îú‚îÄ‚îÄ üìÇ config/               # Configuraci√≥n
‚îú‚îÄ‚îÄ üìÇ ajax/                 # Endpoints AJAX
‚îú‚îÄ‚îÄ üìÇ assets/               # Recursos (CSS, JS, im√°genes)
‚îî‚îÄ‚îÄ üìÇ docs/                 # Documentaci√≥n
```

## üéÆ Funcionalidades por M√≥dulo

### üì¶ Inventario
- Control de stock en tiempo real
- Alertas de stock m√≠nimo
- Esc√°ner de c√≥digos de barras
- Gesti√≥n de vencimientos
- M√∫ltiples ubicaciones

### üõí Compras
- Gesti√≥n de proveedores
- √ìrdenes de compra
- Recepci√≥n de mercader√≠a
- Control de precios
- Historial de compras

### üë• Clientes
- Registro completo de clientes
- Historial de compras
- Gesti√≥n de contactos
- Integraci√≥n con facturaci√≥n

### üìÑ Facturaci√≥n
- Generaci√≥n autom√°tica
- M√∫ltiples formatos (PDF, Excel)
- Control de pagos
- Reportes de ventas

## üîß Configuraci√≥n Avanzada

### Esc√°ner de C√≥digos de Barras
```javascript
// Configurar m√∫ltiples m√©todos de captura
const scanner = {
    webcam: true,      // C√°mara web
    mobile: true,      // Celular v√≠a WiFi  
    usb: true,         // Lector USB
    manual: true       // Entrada manual
};
```

### Reportes
```php
// Generar reporte Excel
$reporte = new ExcelGenerator();
$reporte->exportar('inventario', $filtros);
```

## ü§ù Contribuir

1. Fork el proyecto
2. Crear rama feature (`git checkout -b feature/nueva-funcionalidad`)
3. Commit cambios (`git commit -am 'Agregar nueva funcionalidad'`)
4. Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. Crear Pull Request

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT - ver el archivo [LICENSE](LICENSE) para detalles.

## üë®‚Äçüíª Autor

**Sistema de Gesti√≥n Empresarial**
- Desarrollado con ‚ù§Ô∏è para gesti√≥n empresarial eficiente
- Contacto: [tu-email@ejemplo.com]

## üÜò Soporte

Para soporte t√©cnico:
1. Revisar la [documentaci√≥n](docs/)
2. Crear un [issue](https://github.com/tu-usuario/sistemadgestion5/issues)
3. Contactar al desarrollador

---

‚≠ê Si este proyecto te resulta √∫til, ¬°dale una estrella en GitHub!
"@

$readmeGithub | Out-File -FilePath "$tempDir\README.md" -Encoding UTF8

# LICENSE
$license = @"
MIT License

Copyright (c) 2025 Sistema de Gesti√≥n Empresarial

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
"@

$license | Out-File -FilePath "$tempDir\LICENSE" -Encoding UTF8

# CHANGELOG.md
$changelog = @"
# Changelog

## [2.0.0] - 2025-08-08

### Agregado
- üéØ Sistema de esc√°ner universal (webcam, celular, USB, manual)
- üì¶ Formulario avanzado de productos con 6 pesta√±as
- üîê Sistema de permisos mejorado
- üí± Soporte multi-moneda
- üìä Dashboard con m√©tricas en tiempo real
- üõí M√≥dulo de compras completo
- üìÑ Sistema de facturaci√≥n
- üë• Gesti√≥n avanzada de clientes

### Mejorado
- üöÄ Rendimiento general del sistema
- üì± Interfaz responsive con Bootstrap 5.3
- üîÑ Operaciones AJAX optimizadas
- üìä Reportes Excel y PDF mejorados

### Corregido
- üêõ Problemas de autenticaci√≥n
- üìã Validaciones de formularios
- üîç B√∫squedas y filtros
- üíæ Operaciones de base de datos

## [1.0.0] - 2025-01-01

### Inicial
- üéâ Lanzamiento inicial del sistema
- üì¶ M√≥dulos b√°sicos de inventario
- üë§ Sistema de usuarios
- üìä Reportes b√°sicos
"@

$changelog | Out-File -FilePath "$tempDir\CHANGELOG.md" -Encoding UTF8

Write-Host "üìÅ Creando estructura de carpetas adicionales..." -ForegroundColor Yellow

# Crear carpetas vac√≠as necesarias con archivos .gitkeep
@("assets/uploads", "assets/scanner_input", "assets/scanner_processed") | ForEach-Object {
    $carpeta = "$tempDir/$_"
    New-Item -ItemType Directory -Path $carpeta -Force | Out-Null
    "# Esta carpeta es necesaria para el funcionamiento del sistema" | Out-File -FilePath "$carpeta/.gitkeep" -Encoding UTF8
}

Write-Host "üóúÔ∏è Comprimiendo archivos..." -ForegroundColor Yellow

# Crear el ZIP
Compress-Archive -Path "$tempDir\*" -DestinationPath $archivoZip -Force

# Limpiar carpeta temporal
Remove-Item -Path $tempDir -Recurse -Force

# Obtener informaci√≥n del ZIP
$infoZip = Get-Item $archivoZip
$tamanoMB = [math]::Round($infoZip.Length / 1MB, 2)

Write-Host ""
Write-Host "üéâ ZIP PARA GITHUB CREADO EXITOSAMENTE" -ForegroundColor Green
Write-Host "=======================================" -ForegroundColor Green
Write-Host ""
Write-Host "üì¶ Archivo: $archivoZip" -ForegroundColor White
Write-Host "üìç Ubicaci√≥n: $(Get-Location)\$archivoZip" -ForegroundColor White  
Write-Host "üìä Tama√±o: $tamanoMB MB" -ForegroundColor White
Write-Host ""
Write-Host "üìã ARCHIVOS INCLUIDOS:" -ForegroundColor Cyan
Write-Host "‚îú‚îÄ‚îÄ ‚úÖ Archivos core del sistema (6 archivos)" -ForegroundColor White
Write-Host "‚îú‚îÄ‚îÄ ‚úÖ M√≥dulos completos (admin, clientes, compras, etc.)" -ForegroundColor White  
Write-Host "‚îú‚îÄ‚îÄ ‚úÖ Configuraci√≥n y AJAX" -ForegroundColor White
Write-Host "‚îú‚îÄ‚îÄ ‚úÖ Assets (CSS, JS, im√°genes)" -ForegroundColor White
Write-Host "‚îú‚îÄ‚îÄ ‚úÖ Formularios de gesti√≥n" -ForegroundColor White
Write-Host "‚îú‚îÄ‚îÄ ‚úÖ Sistema de reportes" -ForegroundColor White
Write-Host "‚îú‚îÄ‚îÄ ‚úÖ Documentaci√≥n esencial" -ForegroundColor White
Write-Host "‚îú‚îÄ‚îÄ ‚úÖ .gitignore configurado" -ForegroundColor White
Write-Host "‚îú‚îÄ‚îÄ ‚úÖ README.md optimizado para GitHub" -ForegroundColor White
Write-Host "‚îú‚îÄ‚îÄ ‚úÖ LICENSE (MIT)" -ForegroundColor White
Write-Host "‚îî‚îÄ‚îÄ ‚úÖ CHANGELOG.md" -ForegroundColor White
Write-Host ""
Write-Host "üö´ ARCHIVOS EXCLUIDOS:" -ForegroundColor Yellow
Write-Host "‚îú‚îÄ‚îÄ ‚ùå Backups y archivos temporales" -ForegroundColor Gray
Write-Host "‚îú‚îÄ‚îÄ ‚ùå Archivos de configuraci√≥n local" -ForegroundColor Gray
Write-Host "‚îú‚îÄ‚îÄ ‚ùå Scripts de desarrollo y debug" -ForegroundColor Gray
Write-Host "‚îú‚îÄ‚îÄ ‚ùå Archivos de prueba" -ForegroundColor Gray
Write-Host "‚îî‚îÄ‚îÄ ‚ùå Configuraci√≥n espec√≠fica de VS Code" -ForegroundColor Gray
Write-Host ""
Write-Host "üîÑ PR√ìXIMOS PASOS:" -ForegroundColor Magenta
Write-Host "1. Crear repositorio en GitHub" -ForegroundColor White
Write-Host "2. Extraer el ZIP en tu repositorio local" -ForegroundColor White  
Write-Host "3. git add . && git commit -m 'Initial commit'" -ForegroundColor White
Write-Host "4. git push origin main" -ForegroundColor White
Write-Host ""
Write-Host "üåü ¬°Listo para subir a GitHub!" -ForegroundColor Green
